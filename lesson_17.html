<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
	<title>Ext.form.Panel(数据提交)-犸特头</title>
	<!-- extjs -->
	<link rel="stylesheet" type="text/css" href="../ext-4.2.1.883/resources/css/ext-all-neptune.css">
	<!--<script type="text/javascript" src="../extjs/ext-all.js"></script>-->
	<script type="text/javascript" src="../ext-4.2.1.883/ext-all-debug-w-comments.js"></script>
	<script type="text/javascript" src="../ext-4.2.1.883/locale/ext-lang-zh_CN.js"></script>
	<style type="text/css" >
	body{padding-left:5px;}
	</style>
</head>
<body>
	<script  type="text/javascript">

		// 1、 步骤导入库文件
		Ext.require([
			'Ext.form.*',
			'Ext.direct.*'
		]);
		
		Ext.onReady(function() {
		
			var myConsignmentRef = {name:1,password:2};
		
			var myFormPanel = Ext.create('Ext.form.Panel', {
				title: '发货名单',
				renderTo: Ext.getBody(),
				waitMsgTarget:true, // 设置加载 loading 
				defaults: {
					xtype: 'textfield'
				},
				items: [{
					fieldLabel: '客户名',
					name: 'clientName'
				}, {
					fieldLabel: '装货港口',
					name: 'portOfLoading'
				}, {
					fieldLabel: '卸货港口',
					name: 'portOfDischarge'
				}],
				buttons:[{
					text:'提交',
					handler:function(){
						// 获取控件
						var form = myFormPanel.getForm();
						// 检验
						if (form.isValid()) {
						// 提交
							form.submit({
								// 地址
								url:'./submit.php',
								// loading 加载数据字符设置，并显示
								waitMsg: '提交数据...' ,
								// 参数
								params: {
									foo: 'bar',
									uid: 34
								}
							});
						}
					}
				}]
			});
			myFormPanel.getForm().load({
				url: './load.php',
				params: {
					consignmentRef: myConsignmentRef
				},
				failure: function(form, action) {
					Ext.Msg.alert("Load failed", action.result.errorMessage);
				}
			});
		});

	</script>

	<a href="../ext-4.2.1.883/docs/index.html#!/api/Ext.form.action.Submit"  target="_blank"><h3>doc</h3></a>

	<a href="http://blog.mttqq.com"  target="_blank"><h3>犸特头-Extjs4更多学习</h3></a>
	<a target="_blank" href="http://wp.qq.com/wpa/qunwpa?idkey=f50865b2598688abcae47cca8ae48b5c1ea26a45194c640071eefdd7212d3a2e"><img border="0" src="http://pub.idqqimg.com/wpa/images/group.png" alt="extjs 技术交流" title="extjs 技术交流"></a>

</body>
</html>